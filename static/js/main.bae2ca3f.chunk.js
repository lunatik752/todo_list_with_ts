(this.webpackJsonptodo_list_with_ts=this.webpackJsonptodo_list_with_ts||[]).push([[0],{100:function(t,e,a){t.exports=a(129)},105:function(t,e,a){},106:function(t,e,a){},129:function(t,e,a){"use strict";a.r(e);var n=a(0),o=a.n(n),i=a(8),c=a.n(i);a(105),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(106);var r=a(177),s=a(178),l=a(168),d=a(131),u=a(172),f=a(180),m=a(179),p=a(181),b=a(186),g=a(183),h=a(17),k=function(t,e){t.messages.length?e(_({error:t.messages[0]})):e(_({error:"Some error occurred"})),e(P({status:"failed"}))},E=function(t,e){e(_(t.message?{error:t.message}:{error:"Some error occurred"})),e(P({status:"failed"}))},v=a(41),C=a.n(v),L=C.a.create({baseURL:"https://social-network.samuraijs.com/api/1.1/",withCredentials:!0,headers:{"API-KEY":"90bf912e-ca5a-4b96-9037-858f400fe7a5"}}),j=function(){return L.get("auth/me")},y=function(t){return L.post("/auth/login",t)},O=function(){return L.delete("/auth/login")},T=a(27),I=Object(T.b)({name:"auth",initialState:{isLoggedIn:!1},reducers:{setIsLoggedInAC:function(t,e){t.isLoggedIn=e.payload.value}}}),A=I.reducer,w=I.actions.setIsLoggedInAC,S=Object(T.b)({name:"app",initialState:{status:"idle",error:null,isInitialized:!1},reducers:{setAppStatusAC:function(t,e){t.status=e.payload.status},setAppErrorAC:function(t,e){t.error=e.payload.error},setInitializeAppAC:function(t,e){t.isInitialized=e.payload.isInitialized}}}),x=S.reducer,F=S.actions,P=F.setAppStatusAC,_=F.setAppErrorAC,N=F.setInitializeAppAC;function z(t){return o.a.createElement(g.a,Object.assign({elevation:6,variant:"filled"},t))}function D(){var t=Object(h.c)((function(t){return t.app.error})),e=Object(h.b)(),a=function(t,a){e(_({error:null}))};return o.a.createElement(b.a,{open:null!==t,autoHideDuration:6e3,onClose:a},o.a.createElement(z,{onClose:a,severity:"error"},t))}var M,R,U=a(173),K=a(45),q=a(182),B=a(170),H=o.a.memo((function(t){var e=t.addItem,a=t.disabled,i=void 0!==a&&a;console.log("AddItemForm called");var c=Object(n.useState)(""),r=Object(K.a)(c,2),s=r[0],d=r[1],u=Object(n.useState)(null),f=Object(K.a)(u,2),m=f[0],p=f[1],b=function(){""!==s.trim()?(e(s),d("")):p("Title is required")};return o.a.createElement("div",null,o.a.createElement(q.a,{variant:"outlined",value:s,onChange:function(t){d(t.currentTarget.value)},onKeyPress:function(t){null!==m&&p(null),13===t.charCode&&b()},error:!!m,label:"Title",helperText:m,disabled:i}),o.a.createElement(l.a,{color:"primary",onClick:b,disabled:i},o.a.createElement(B.a,null)))})),Y=a(130),Z=a(88),J=o.a.memo((function(t){console.log("EditableSpan called");var e=Object(n.useState)(!1),a=Object(K.a)(e,2),i=a[0],c=a[1],r=Object(n.useState)(t.title),s=Object(K.a)(r,2),l=s[0],d=s[1];return i?o.a.createElement(q.a,{variant:"outlined",value:l,autoFocus:!0,onChange:function(t){d(t.currentTarget.value)},onBlur:function(){c(!1),t.onChangeTitle(l)}}):o.a.createElement("span",{onDoubleClick:function(){t.disabled?c(!1):c(!0),d(t.title)}},t.title)})),W=a(171),$=a(184);!function(t){t[t.New=0]="New",t[t.InProgress=1]="InProgress",t[t.Completed=2]="Completed",t[t.Draft=3]="Draft"}(M||(M={})),function(t){t[t.Low=0]="Low",t[t.Middle=1]="Middle",t[t.Hi=2]="Hi",t[t.Urgently=3]="Urgently",t[t.Later=4]="Later"}(R||(R={}));var V=C.a.create({baseURL:"https://social-network.samuraijs.com/api/1.1//todo-lists/",withCredentials:!0,headers:{"API-KEY":"90bf912e-ca5a-4b96-9037-858f400fe7a5"}}),G=function(t){return V.get("".concat(t,"/tasks"))},Q=function(t,e){return V.post("".concat(t,"/tasks"),{title:e})},X=function(t,e){return V.delete("".concat(t,"/tasks/").concat(e))},tt=function(t,e,a){return V.put("".concat(t,"/tasks/").concat(e),a)},et=o.a.memo((function(t){console.log("Task called");var e=Object(n.useCallback)((function(e){t.changeTaskTitle(t.task.id,e,t.todoListId)}),[t]),a="loading"===t.task.entityTaskStatus;return o.a.createElement("div",{key:t.task.id,className:t.task.status===M.Completed?"isDone":""},o.a.createElement($.a,{color:"primary",checked:t.task.status===M.Completed,onChange:function(e){var a=e.currentTarget.checked;t.changeStatus(t.task.id,a?M.Completed:M.New,t.todoListId)},disabled:a}),o.a.createElement(J,{title:t.task.title,onChangeTitle:e,disabled:a}),o.a.createElement(l.a,{onClick:function(){return t.removeTask(t.task.id,t.todoListId)},disabled:a},o.a.createElement(W.a,null)))})),at=a(58),nt=a(19),ot=C.a.create({baseURL:"https://social-network.samuraijs.com/api/1.1/",withCredentials:!0,headers:{"API-KEY":"90bf912e-ca5a-4b96-9037-858f400fe7a5"}}),it=function(t,e){return ot.put("todo-lists/".concat(t),{title:e})},ct=function(){return ot.get("/todo-lists")},rt=function(t){return ot.post("todo-lists",{title:t})},st=function(t){return ot.delete("todo-lists/".concat(t))},lt=Object(T.b)({name:"todoList",initialState:[],reducers:{setTodoListsAC:function(t,e){return e.payload.todoLists.map((function(t){return Object(nt.a)(Object(nt.a)({},t),{},{filter:"all",entityStatus:"succeeded"})}))},removeTodoListAC:function(t,e){var a=t.findIndex((function(t){return t.id===e.payload.todoListId}));a>-1&&t.splice(a,1)},addTodoListAC:function(t,e){t.unshift(Object(nt.a)(Object(nt.a)({},e.payload.todoList),{},{filter:"all",entityStatus:"idle"}))},changeTodoListTitleAC:function(t,e){var a=t.findIndex((function(t){return t.id===e.payload.todoListId}));t[a].title=e.payload.newTitle},changeTodoListFilterAC:function(t,e){var a=t.findIndex((function(t){return t.id===e.payload.todoListId}));t[a].filter=e.payload.newFilter},changeTodoListEntityStatusAC:function(t,e){var a=t.findIndex((function(t){return t.id===e.payload.todoListId}));t[a].entityStatus=e.payload.entityStatus}}}),dt=lt.actions,ut=dt.setTodoListsAC,ft=dt.removeTodoListAC,mt=dt.addTodoListAC,pt=dt.changeTodoListTitleAC,bt=dt.changeTodoListFilterAC,gt=dt.changeTodoListEntityStatusAC,ht=lt.reducer,kt=Object(T.b)({name:"tasks",initialState:{},reducers:{setTasksAC:function(t,e){return Object(nt.a)(Object(nt.a)({},t),{},Object(at.a)({},e.payload.todoListId,e.payload.tasks.map((function(t){return Object(nt.a)(Object(nt.a)({},t),{},{entityTaskStatus:"idle"})}))))},removeTaskAC:function(t,e){var a=t[e.payload.todoListId].findIndex((function(t){return t.id===e.payload.taskId}));a>-1&&t[e.payload.todoListId].splice(a,1)},addTaskAC:function(t,e){t[e.payload.task.todoListId].unshift(Object(nt.a)(Object(nt.a)({},e.payload.task),{},{entityTaskStatus:"idle"}))},updateTaskAC:function(t,e){var a=t[e.payload.todoListId],n=a.findIndex((function(t){return t.id===e.payload.taskId}));n>-1&&(a[n]=Object(nt.a)(Object(nt.a)({},a[n]),e.payload.domainModel))},changeTaskEntityStatusAC:function(t,e){var a=t[e.payload.todoListId],n=a.findIndex((function(t){return t.id===e.payload.taskId}));n>-1&&(a[n]=Object(nt.a)(Object(nt.a)({},a[n]),{},{entityTaskStatus:e.payload.entityTaskStatus}))}},extraReducers:function(t){t.addCase(mt,(function(t,e){t[e.payload.todoList.id]=[]})),t.addCase(ft,(function(t,e){delete t[e.payload.todoListId]})),t.addCase(ut,(function(t,e){e.payload.todoLists.forEach((function(e){t[e.id]=[]}))}))}}),Et=kt.reducer,vt=kt.actions,Ct=vt.setTasksAC,Lt=vt.changeTaskEntityStatusAC,jt=vt.updateTaskAC,yt=vt.addTaskAC,Ot=vt.removeTaskAC,Tt=function(t,e,a){return function(n,o){n(P({status:"loading"}));var i=o().tasks[a].find((function(e){return e.id===t}));if(i){var c=Object(nt.a)({title:i.title,startDate:i.startDate,priority:i.priority,description:i.description,deadline:i.deadline,status:i.status},e);tt(a,t,c).then((function(o){0===o.data.resultCode?(n(jt({taskId:t,domainModel:e,todoListId:a})),n(P({status:"succeeded"}))):k(o.data,n)})).catch((function(t){E(t,n)}))}else console.log("task is not found in the state")}},It=o.a.memo((function(t){var e=t.demo,a=void 0!==e&&e,i=Object(Z.a)(t,["demo"]);console.log("Todolist called");var c=Object(n.useCallback)((function(t){i.addTask(i.todoList.id,t)}),[i]),r=Object(n.useCallback)((function(){i.changeFilter("all",i.todoList.id)}),[i]),s=Object(n.useCallback)((function(){i.changeFilter("active",i.todoList.id)}),[i]),d=Object(n.useCallback)((function(){i.changeFilter("completed",i.todoList.id)}),[i]),f=Object(n.useCallback)((function(t){i.changeTodoListTitle(t,i.todoList.id)}),[i]),m=i.tasks;"active"===i.todoList.filter&&(m=i.tasks.filter((function(t){return t.status===M.New}))),"completed"===i.todoList.filter&&(m=i.tasks.filter((function(t){return t.status===M.Completed})));var p=Object(h.b)();return Object(n.useEffect)((function(){var t;a||p((t=i.todoList.id,function(e){e(P({status:"loading"})),G(t).then((function(a){e(Ct({tasks:a.data.items,todoListId:t})),e(P({status:"succeeded"}))})).catch((function(t){E(t,e)}))}))}),[a,p,i.todoList.id]),o.a.createElement("div",null,o.a.createElement("div",{className:"todoListTitle"},o.a.createElement("h3",null,o.a.createElement(J,{title:i.todoList.title,onChangeTitle:f})),o.a.createElement(l.a,{onClick:function(){i.removeTodoList(i.todoList.id)},disabled:"loading"===i.todoList.entityStatus},o.a.createElement(W.a,null))),o.a.createElement(H,{addItem:c,disabled:"loading"===i.todoList.entityStatus}),o.a.createElement("div",null,m.map((function(t){return o.a.createElement(et,{key:t.id,task:t,removeTask:i.removeTask,changeStatus:i.changeStatus,todoListId:i.todoList.id,changeTaskTitle:i.changeTaskTitle})}))),o.a.createElement("div",null,o.a.createElement(u.a,{variant:"all"===i.todoList.filter?"contained":"text",onClick:r,color:"default"},"All"),o.a.createElement(u.a,{variant:"active"===i.todoList.filter?"contained":"text",onClick:s,color:"primary"},"Active"),o.a.createElement(u.a,{variant:"completed"===i.todoList.filter?"contained":"text",onClick:d,color:"secondary"},"Completed")))})),At=a(13),wt=function(t){var e=t.demo,a=void 0!==e&&e,i=Object(h.c)((function(t){return t.todoLists})),c=Object(h.c)((function(t){return t.tasks})),r=Object(h.c)((function(t){return t.auth.isLoggedIn})),s=Object(h.b)(),l=Object(n.useCallback)((function(t,e){s(function(t,e){return function(a){a(P({status:"loading"})),a(Lt({todoListId:e,taskId:t,entityTaskStatus:"loading"})),X(e,t).then((function(n){0===n.data.resultCode?(a(Ot({taskId:t,todoListId:e})),a(P({status:"succeeded"}))):k(n.data,a)})).catch((function(t){E(t,a)}))}}(t,e))}),[s]),d=Object(n.useCallback)((function(t,e){s(function(t,e){return function(a){a(P({status:"loading"})),Q(t,e).then((function(t){if(0===t.data.resultCode){var e=t.data.data.item;a(yt({task:e})),a(P({status:"succeeded"}))}else k(t.data,a)})).catch((function(t){E(t,a)}))}}(t,e))}),[s]),u=Object(n.useCallback)((function(t,e,a){s(Tt(t,{status:e},a))}),[s]),f=Object(n.useCallback)((function(t,e){s(bt({newFilter:t,todoListId:e}))}),[s]),m=Object(n.useCallback)((function(t){var e;s((e=t,function(t){t(P({status:"loading"})),t(gt({todoListId:e,entityStatus:"loading"})),st(e).then((function(a){0===a.data.resultCode?(t(ft({todoListId:e})),t(P({status:"succeeded"}))):k(a.data,t)})).catch((function(e){E(e,t)}))}))}),[s]),p=Object(n.useCallback)((function(t){s(function(t){return function(e){e(P({status:"loading"})),rt(t).then((function(t){0===t.data.resultCode?(e(mt({todoList:t.data.data.item})),e(P({status:"succeeded"}))):k(t.data,e)})).catch((function(t){E(t,e)}))}}(t))}),[s]),b=Object(n.useCallback)((function(t,e,a){s(Tt(t,{title:e},a))}),[s]),g=Object(n.useCallback)((function(t,e){s(function(t,e){return function(a){a(P({status:"loading"})),it(e,t).then((function(n){0===n.data.resultCode?(a(pt({newTitle:t,todoListId:e})),a(P({status:"succeeded"}))):k(n.data,a)})).catch((function(t){E(t,a)}))}}(t,e))}),[s]);return Object(n.useEffect)((function(){!a&&r&&s((function(t){t(P({status:"loading"})),ct().then((function(e){t(ut({todoLists:e.data})),t(P({status:"succeeded"}))})).catch((function(e){E(e,t)}))}))}),[a,s,r]),r?o.a.createElement(o.a.Fragment,null,o.a.createElement(U.a,{container:!0,style:{padding:"20px"}},o.a.createElement(H,{addItem:p})),o.a.createElement(U.a,{container:!0,spacing:3},i.map((function(t){var e=c[t.id];return o.a.createElement(U.a,{key:t.id,item:!0},o.a.createElement(Y.a,{style:{padding:"10px",backgroundColor:"#cfe8fc"}},o.a.createElement(It,{todoList:t,tasks:e,removeTask:l,changeFilter:f,addTask:d,changeStatus:u,removeTodoList:m,changeTaskTitle:b,changeTodoListTitle:g,demo:a})))})))):o.a.createElement(At.a,{to:"/login"})},St=a(187),xt=a(169),Ft=a(174),Pt=a(175),_t=a(87),Nt=function(){var t=Object(h.c)((function(t){return t.auth.isLoggedIn})),e=Object(h.b)(),a=Object(_t.a)({initialValues:{email:"",password:"",rememberMe:!1},validate:function(t){var e={};return t.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(t.email)||(e.email="Invalid email address"):e.email="Email is required",t.password||(e.password="Password is required"),e},onSubmit:function(t){var a;e((a=t,function(t){t(P({status:"loading"})),y(a).then((function(e){0===e.data.resultCode?(t(w({value:!0})),t(P({status:"succeeded"}))):k(e.data,t)})).catch((function(e){E(e,t)}))}))}});return t?o.a.createElement(At.a,{to:"/"}):o.a.createElement(U.a,{container:!0,justify:"center"},o.a.createElement(U.a,{item:!0,xs:4},o.a.createElement("form",{onSubmit:a.handleSubmit},o.a.createElement(St.a,null,o.a.createElement(xt.a,null,o.a.createElement("p",null,"To log in get registered",o.a.createElement("a",{href:"https://social-network.samuraijs.com/",target:"_blank",rel:"noopener noreferrer"},"here")),o.a.createElement("p",null,"or use common test account credentials:"),o.a.createElement("p",null,"Email: free@samuraijs.com"),o.a.createElement("p",null,"Password: free")),o.a.createElement(Ft.a,null,o.a.createElement(q.a,Object.assign({label:"Email",margin:"normal",name:"email"},a.getFieldProps("email"))),a.errors.email?o.a.createElement("div",{style:{color:"red"}},a.errors.email):null,o.a.createElement(q.a,Object.assign({type:"password",label:"Password"},a.getFieldProps("password"))),a.errors.password?o.a.createElement("div",{style:{color:"red"}},a.errors.password):null,o.a.createElement(Pt.a,{label:"Remember me",control:o.a.createElement($.a,Object.assign({},a.getFieldProps("rememberMe"),{checked:a.values.rememberMe}))}),o.a.createElement(u.a,{type:"submit",variant:"contained",color:"primary"},"Login"))))))},zt=a(176),Dt=function(t){var e=t.demo,a=void 0!==e&&e,i=Object(h.c)((function(t){return t.auth.isLoggedIn})),c=Object(h.b)();Object(n.useEffect)((function(){c((function(t){j().then((function(e){0===e.data.resultCode&&t(w({value:!0})),t(N({isInitialized:!0}))}))}))}));var b=Object(h.c)((function(t){return t.app.status}));return Object(h.c)((function(t){return t.app.isInitialized}))?o.a.createElement("div",{className:"App"},o.a.createElement(D,null),o.a.createElement(r.a,{position:"static"},o.a.createElement(s.a,null,o.a.createElement(l.a,{edge:"start",color:"inherit","aria-label":"menu"},o.a.createElement(m.a,null)),o.a.createElement(d.a,{variant:"h6"},"News"),i&&o.a.createElement(u.a,{color:"inherit",onClick:function(){c((function(t){t(P({status:"loading"})),O().then((function(e){0===e.data.resultCode?(t(w({value:!1})),t(P({status:"succeeded"}))):k(e.data,t)})).catch((function(e){E(e,t)}))}))}},"Log out")),"loading"===b&&o.a.createElement(f.a,{color:"secondary"})),o.a.createElement(p.a,{fixed:!0},o.a.createElement(At.b,{exact:!0,path:"/",render:function(){return o.a.createElement(wt,{demo:a})}}),o.a.createElement(At.b,{exact:!0,path:"/login",render:function(){return o.a.createElement(Nt,null)}}))):o.a.createElement("div",{style:{position:"fixed",top:"30%",textAlign:"center",width:"100%"}},o.a.createElement(zt.a,null))},Mt=a(23),Rt=a(49),Ut=Object(Mt.c)({tasks:Et,todoLists:ht,app:x,auth:A}),Kt=Object(T.a)({reducer:Ut,middleware:function(t){return t().prepend(Rt.a)}});window.store=Kt;var qt=a(48);c.a.render(o.a.createElement(h.a,{store:Kt},o.a.createElement(qt.a,{basename:"/todo_list_with_ts"},o.a.createElement(Dt,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[100,1,2]]]);
//# sourceMappingURL=main.bae2ca3f.chunk.js.map